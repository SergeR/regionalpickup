<script type="text/javascript" src="{wa_url}wa-plugins/RegianalPickup/js/angular.min.js"></script>
<script type="text/javascript" src="{wa_url}wa-plugins/RegianalPickup/js/RegionalPickupSettings.js"></script>

<div ng-controller="RegionalPickupSettingsController">
{literal}	
    <pre>{{}}</pre>
	
    <div class="field">
        <div class="name">{$p->_w('Currency')}</label>
        </div>
        <div class="value">
            <select name="{$namespace|escape}[currency]" autocomplete="off">
                <option value="">-</option>
                {foreach $currencies as $currency}
                    <option value="{$currency.code|escape}"{if $values.currency == $currency.code} selected="selected"{/if}>{"`$currency.title` (`$currency.code`)"|escape}</option>
                {/foreach}
            </select>
        </div>
    </div>
    <div class="field">
        <div class="name">{$p->_w('Locations')}
            <br><br>
            <p class="hint">{$p->_w('Customer will be prompted to select preferred location from the list')}</p>
        </div>
        <div class="value">
            <table class="zebra">
                <thead>
                    <tr>
                        <th>{$p->_w('Location name')}</th>
                        <th>&nbsp;</th>
                        <th>{$p->_w('Shipping rate (surcharge)')}</th>
                        <th>&nbsp;</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr class="white">
                        <td colspan="4">
                            <a class="inline-link small add-rate" href="#">
                                <i class="icon10 add"></i> <b><i>{$p->_w('Add location')}</i></b>
                            </a>
                        </td>
                    </tr>
                </tfoot>
                <tbody>
                    {foreach $values.rate as $rate}
                        <tr class="rate">
                            <td>
                                <input type="text" value="{$rate.location|escape}" 
                                    class="refreshable input"
                                    name="{$namespace|escape}[rate][{$rate@index}][location]"
                                    placeholder="{$p->_w('Location name')}"
                                >
                            </td>
                            <td>→</td>
                            <td>
                                <input type="text" value="{$rate.cost|escape}" 
                                    name="{$namespace|escape}[rate][{$rate@index}][cost]"
                                    placeholder="0"
                                >
                            </td>
                            <td>
                                <a class="delete-rate" href="#">
                                    <i class="icon16 delete"></i>
                                </a>
                            </td>
                        </tr>
                    {foreachelse}
                        <tr class="rate">
                            <td>
                                <input type="text" value="" 
                                    class="refreshable input"
                                    name="{$namespace|escape}[rate][0][location]"
                                    placeholder="{$p->_w('Location name')}"
                                >
                            </td>
                            <td>→</td>
                            <td>
                                <input type="text" value="{$rate.cost|escape}" 
                                    name="{$namespace|escape}[rate][0][cost]"
                                    placeholder="0"
                                >
                            </td>
                            <td>
                                <a class="delete-rate" href="#">
                                    <i class="icon16 delete"></i>
                                </a>
                            </td>
                        </tr>
                    {/foreach}
                </tbody>
            </table>
        </div>
    </div>
    {/literal}
</div>